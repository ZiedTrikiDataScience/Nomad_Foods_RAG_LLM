# Build the image :

docker build -t ziedtrikimlops/rag-chatbot-nomad-food:v1 .

docker tag rag-chatbot-nomad-food:v1 ziedtrikimlops/rag-chatbot-nomad-food:v1


# Push the image to Docker Hub :

docker push ziedtrikimlops/rag-chatbot-nomad-food:v1

# Run a container out of the image and run it :

docker run -p 8501:8501 ziedtrikimlops/rag-chatbot-nomad-food:v1

docker run -e MISTRAL_API_KEY="fQNPaIfDLtWDpedUzCg268i3ObyWgSZV" -p 8501:8501 ziedtrikimlops/rag-chatbot-nomad-food:v1

# Create the API key secret kubernetes key :
kubectl delete secret mistral-api-key

kubectl create secret generic mistral-api-key --from-literal=MISTRAL_API_KEY=fQNPaIfDLtWDpedUzCg268i3ObyWgSZV

# Deploy :

kubectl apply -f rag_nomad_app_deployment.yaml

kubectl apply -f rag_nomad_app_service.yaml

kubectl get deployments

kubectl get pods

